<?xml version="1.0" encoding="utf-8"?>
<FDL version="1.2">
  <TypeDefinition url="..\default_typedef.xml"/>
  <Form id="BNS412" classname="Template_pop" inheritanceid="" position="absolute 0 0 835 500" titletext="주유이력상세" onload="BNS412_onload">
    <Layout>
      <Static id="Static04" class="sta_WFSA_BG" position="absolute 12 324 831 359" text=""/>
      <Static id="Static02" class="sta_WFSA_BG" position="absolute 12 39 829 130" text=""/>
      <Grid id="Grd_CustGrd" taborder="15" binddataset="ds_if_dtl_record" position="absolute 12 366 832 493" onkeydown="Grd_CustGrd_onkeydown" cellsizingtype="both" onheadclick="Grd_CustGrd_onheadclick" formats="&lt;Formats&gt;&#10;  &lt;Format id=&quot;default&quot;&gt;&#10;    &lt;Columns&gt;&#10;      &lt;Col size=&quot;80&quot;/&gt;&#10;      &lt;Col size=&quot;80&quot;/&gt;&#10;      &lt;Col size=&quot;80&quot;/&gt;&#10;      &lt;Col size=&quot;80&quot;/&gt;&#10;      &lt;Col size=&quot;80&quot;/&gt;&#10;      &lt;Col size=&quot;80&quot;/&gt;&#10;      &lt;Col size=&quot;80&quot;/&gt;&#10;      &lt;Col size=&quot;80&quot;/&gt;&#10;      &lt;Col size=&quot;80&quot;/&gt;&#10;      &lt;Col size=&quot;80&quot;/&gt;&#10;      &lt;Col size=&quot;80&quot;/&gt;&#10;      &lt;Col size=&quot;80&quot;/&gt;&#10;      &lt;Col size=&quot;80&quot;/&gt;&#10;      &lt;Col size=&quot;80&quot;/&gt;&#10;      &lt;Col size=&quot;80&quot;/&gt;&#10;      &lt;Col size=&quot;80&quot;/&gt;&#10;    &lt;/Columns&gt;&#10;    &lt;Rows&gt;&#10;      &lt;Row band=&quot;head&quot; size=&quot;24&quot;/&gt;&#10;      &lt;Row band=&quot;body&quot; size=&quot;24&quot;/&gt;&#10;    &lt;/Rows&gt;&#10;    &lt;Band id=&quot;head&quot;&gt;&#10;      &lt;Cell col=&quot;0&quot; disptype=&quot;normal&quot; text=&quot;BARCD&quot;/&gt;&#10;      &lt;Cell col=&quot;1&quot; disptype=&quot;normal&quot; text=&quot;PAYMDIVCD&quot;/&gt;&#10;      &lt;Cell col=&quot;2&quot; disptype=&quot;normal&quot; text=&quot;FDYNEXPTDETAIL&quot;/&gt;&#10;      &lt;Cell col=&quot;3&quot; disptype=&quot;normal&quot; text=&quot;AMTEXPTDETAIL&quot;/&gt;&#10;      &lt;Cell col=&quot;4&quot; disptype=&quot;normal&quot; text=&quot;CRDNO&quot;/&gt;&#10;      &lt;Cell col=&quot;5&quot; disptype=&quot;normal&quot; text=&quot;CCRDCONM&quot;/&gt;&#10;      &lt;Cell col=&quot;6&quot; disptype=&quot;normal&quot; text=&quot;CARDALIAS&quot;/&gt;&#10;      &lt;Cell col=&quot;7&quot; disptype=&quot;normal&quot; text=&quot;TROWNNO&quot;/&gt;&#10;      &lt;Cell col=&quot;8&quot; disptype=&quot;normal&quot; text=&quot;APRVDIVCDDETAIL&quot;/&gt;&#10;      &lt;Cell col=&quot;9&quot; disptype=&quot;normal&quot; text=&quot;FDTYNPAYMDETAIL&quot;/&gt;&#10;      &lt;Cell col=&quot;10&quot; disptype=&quot;normal&quot; text=&quot;AMTPAYMDETAIL&quot;/&gt;&#10;      &lt;Cell col=&quot;11&quot; disptype=&quot;normal&quot; text=&quot;FDTAMT&quot;/&gt;&#10;      &lt;Cell col=&quot;12&quot; disptype=&quot;normal&quot; text=&quot;RESPCD&quot;/&gt;&#10;      &lt;Cell col=&quot;13&quot; disptype=&quot;normal&quot; text=&quot;APRVNO&quot;/&gt;&#10;      &lt;Cell col=&quot;14&quot; disptype=&quot;normal&quot; text=&quot;TOTRESTPT&quot;/&gt;&#10;      &lt;Cell col=&quot;15&quot; disptype=&quot;normal&quot; text=&quot;GNRLPT&quot;/&gt;&#10;    &lt;/Band&gt;&#10;    &lt;Band id=&quot;body&quot;&gt;&#10;      &lt;Cell col=&quot;0&quot; disptype=&quot;normal&quot; text=&quot;bind:BARCD&quot;/&gt;&#10;      &lt;Cell col=&quot;1&quot; disptype=&quot;normal&quot; text=&quot;bind:PAYMDIVCD&quot;/&gt;&#10;      &lt;Cell col=&quot;2&quot; disptype=&quot;normal&quot; text=&quot;bind:FDYNEXPTDETAIL&quot;/&gt;&#10;      &lt;Cell col=&quot;3&quot; disptype=&quot;normal&quot; text=&quot;bind:AMTEXPTDETAIL&quot;/&gt;&#10;      &lt;Cell col=&quot;4&quot; disptype=&quot;normal&quot; text=&quot;bind:CRDNO&quot;/&gt;&#10;      &lt;Cell col=&quot;5&quot; disptype=&quot;normal&quot; text=&quot;bind:CCRDCONM&quot;/&gt;&#10;      &lt;Cell col=&quot;6&quot; disptype=&quot;normal&quot; text=&quot;bind:CARDALIAS&quot;/&gt;&#10;      &lt;Cell col=&quot;7&quot; disptype=&quot;normal&quot; text=&quot;bind:TROWNNO&quot;/&gt;&#10;      &lt;Cell col=&quot;8&quot; disptype=&quot;normal&quot; text=&quot;bind:APRVDIVCDDETAIL&quot;/&gt;&#10;      &lt;Cell col=&quot;9&quot; disptype=&quot;normal&quot; text=&quot;bind:FDTYNPAYMDETAIL&quot;/&gt;&#10;      &lt;Cell col=&quot;10&quot; disptype=&quot;normal&quot; text=&quot;bind:AMTPAYMDETAIL&quot;/&gt;&#10;      &lt;Cell col=&quot;11&quot; disptype=&quot;normal&quot; text=&quot;bind:FDTAMT&quot;/&gt;&#10;      &lt;Cell col=&quot;12&quot; disptype=&quot;normal&quot; text=&quot;bind:RESPCD&quot;/&gt;&#10;      &lt;Cell col=&quot;13&quot; disptype=&quot;normal&quot; text=&quot;bind:APRVNO&quot;/&gt;&#10;      &lt;Cell col=&quot;14&quot; disptype=&quot;normal&quot; text=&quot;bind:TOTRESTPT&quot;/&gt;&#10;      &lt;Cell col=&quot;15&quot; disptype=&quot;normal&quot; text=&quot;bind:GNRLPT&quot;/&gt;&#10;    &lt;/Band&gt;&#10;  &lt;/Format&gt;&#10;&lt;/Formats&gt;&#10;" nodatatext="조회된건이 없습니다.">
        <Formats>
          <Format id="default">
            <Columns>
              <Column size="120"/>
              <Column size="80"/>
              <Column size="78"/>
              <Column size="46"/>
              <Column size="45"/>
              <Column size="82"/>
              <Column size="199"/>
              <Column size="240"/>
            </Columns>
            <Rows>
              <Row size="24" band="head"/>
              <Row size="24"/>
            </Rows>
            <Band id="head">
              <Cell text="결제구분"/>
              <Cell col="1" text="네이버페이"/>
              <Cell col="2" text="현장할인여부"/>
              <Cell col="3" text="쿠폰"/>
              <Cell col="4" text="포인트"/>
              <Cell col="5" text="결제금액"/>
              <Cell col="6" text="결제카드"/>
              <Cell col="7" text="결제구분"/>
            </Band>
            <Band id="body">
              <Cell text="expr:ds_if_dtl_record.getColumn(currow,'PAYMDIVCD') == &quot;03&quot;?&quot;신용카드&quot;:(ds_if_dtl_record.getColumn(currow,'PAYMDIVCD') == &quot;09&quot;?&quot;보너스카드&quot;:(ds_if_dtl_record.getColumn(currow,'PAYMDIVCD') == &quot;12&quot;?&quot;쿠폰&quot;:(ds_if_dtl_record.getColumn(currow,'PAYMDIVCD') == &quot;09&quot;?&quot;보너스카드&quot;:&quot;&quot;)))"/>
              <Cell col="1" text="bind:PGCOSXNNM"/>
              <Cell col="2" text="expr:ds_if_dtl_record.getColumn(currow,'PAYMDIVCD') == &quot;03&quot;?ds_if_dtl_record.getColumn(currow,'FDTYNEXPTDETAIL'):(ds_if_dtl_record.getColumn(currow,'PAYMDIVCD') == &quot;09&quot;?&quot;&quot;:(ds_if_dtl_record.getColumn(currow,'PAYMDIVCD') == &quot;12&quot;?&quot;&quot;:(ds_if_dtl_record.getColumn(currow,'PAYMDIVCD') == &quot;09&quot;?&quot;&quot;:&quot;&quot;)))"/>
              <Cell col="3" text="bind:CUPNUSEYN"/>
              <Cell col="4" text="bind:PTUSEYN"/>
              <Cell col="5" displaytype="number" text="bind:AMTEXPTDETAIL"/>
              <Cell col="6" text="expr:ds_if_dtl_record.getColumn(currow,'CCRDCONM') == &quot;&quot;?&quot;&quot;:ds_if_dtl_record.getColumn(currow,'CCRDCONM')+&quot;:&quot;+ds_if_dtl_record.getColumn(currow,'CARDALIAS')"/>
              <Cell col="7" text="bind:PAYMDIVVAL"/>
            </Band>
          </Format>
        </Formats>
      </Grid>
      <Static id="Stt_SrchTxt" text="총         건" position="absolute 1010 80 1078 92" visible="false"/>
      <Static id="Stt_SrchCnt" position="absolute 1024 80 1056 92" style="align:right top; " text="" visible="false"/>
      <Static id="Static00" text="결제 및 패턴 정보" class="sta_WF_subtitle" position="absolute 18 17 187 29"/>
      <Edit id="Edt_txt" taborder="1" imemode="hangul" class="edt_WFSA" position="absolute 81 75 200 95" readonly="true"/>
      <Static id="Stt_AREA09" text="핀번호" class="sta_WFSA_label" position="absolute 29 79 89 91"/>
      <Static id="Stt_AREA00" text="예약단가" class="sta_WFSA_label" position="absolute 334 335 396 350"/>
      <Static id="Stt_AREA01" text="매출일자" class="sta_WFSA_label" position="absolute 237 53 297 65"/>
      <Static id="Stt_AREA03" text="단가" class="sta_WFSA_label" position="absolute 966 184 1026 196" visible="false"/>
      <Edit id="Edt_txt11" taborder="1" imemode="hangul" class="edt_WFSA" position="absolute 1025 180 1146 200" visible="false"/>
      <Static id="Stt_AREA04" text="상품구분" class="sta_WFSA_label" position="absolute 30 335 91 347"/>
      <Edit id="Edt_txt00" taborder="1" imemode="hangul" class="edt_WFSA" position="absolute 90 331 171 352" readonly="true"/>
      <Static id="Stt_AREA05" text="전체결제금액(예정)" class="sta_WFSA_label" position="absolute 487 337 611 349"/>
      <Edit id="Edt_txt02" taborder="1" imemode="hangul" class="edt_WFSA" position="absolute 395 332 476 353" inputtype="" readonly="true"/>
      <Static id="Stt_AREA06" text="승인구분" class="sta_WFSA_label" position="absolute 237 78 298 90"/>
      <Edit id="Edt_txt05" taborder="1" imemode="hangul" class="edt_WFSA" position="absolute 306 75 427 94" readonly="true"/>
      <Static id="Stt_AREA07" text="주유량" class="sta_WFSA_label" position="absolute 443 80 503 92"/>
      <Edit id="Edt_txt09" taborder="1" imemode="hangul" class="edt_WFSA" position="absolute 508 76 593 96" readonly="true"/>
      <Static id="Stt_AREA08" text="패턴명" class="sta_WFSA_label" position="absolute 29 52 89 64"/>
      <Edit id="Edt_txt12" taborder="1" imemode="hangul" class="edt_WFSA" position="absolute 81 48 200 68" readonly="true"/>
      <Static id="Stt_AREA10" text="예약수량" class="sta_WFSA_label" position="absolute 183 335 242 350"/>
      <Static id="Stt_AREA12" text="주유소명" class="sta_WFSA_label" position="absolute 443 55 503 67"/>
      <Edit id="Edt_txt07" taborder="1" imemode="hangul" class="edt_WFSA" position="absolute 508 51 789 71" readonly="true"/>
      <Static id="Stt_AREA13" text="전체결제금액" class="sta_WFSA_label" position="absolute 607 80 691 92"/>
      <Static id="Static01" text="결제 예정 상세" class="sta_WF_subtitle" position="absolute 18 307 187 319"/>
      <Grid id="Grd_CustGrd00" taborder="1" binddataset="ds_if_dtl_record00" useinputpanel="false" cellsizingtype="both" onkeydown="Grd_CustGrd_onkeydown" onheadclick="Grd_CustGrd_onheadclick" position="absolute 12 166 832 293">
        <Formats>
          <Format id="default">
            <Columns>
              <Column size="135"/>
              <Column size="90"/>
              <Column size="93"/>
              <Column size="0"/>
              <Column size="80"/>
              <Column size="0"/>
              <Column size="55"/>
              <Column size="120"/>
              <Column size="74"/>
              <Column size="72"/>
              <Column size="72"/>
              <Column size="100"/>
              <Column size="80"/>
            </Columns>
            <Rows>
              <Row size="24" band="head"/>
              <Row size="24"/>
            </Rows>
            <Band id="head">
              <Cell text="거래번호"/>
              <Cell col="1" text="결제구분"/>
              <Cell col="2" text="승인구분"/>
              <Cell col="3" text="현장할인여부"/>
              <Cell col="4" text="결제금액"/>
              <Cell col="5" text="현장할인금액"/>
              <Cell col="6" text="응답코드"/>
              <Cell col="7" text="응답메시지"/>
              <Cell col="8" text="승인번호"/>
              <Cell col="9" text="가용포인트"/>
              <Cell col="10" text="적립포인트"/>
              <Cell col="11" text="카드포인트사용금액"/>
              <Cell col="12" text="할부"/>
            </Band>
            <Band id="body">
              <Cell text="bind:TROWNNO"/>
              <Cell col="1" text="expr:ds_if_dtl_record00.getColumn(currow,'PAYMDIVCD') == 03?&quot;신용카드&quot;:(ds_if_dtl_record00.getColumn(currow,'PAYMDIVCD') == 09?&quot;보너스카드&quot;:(ds_if_dtl_record00.getColumn(currow,'PAYMDIVCD') == 12?&quot;쿠폰&quot;:(ds_if_dtl_record00.getColumn(currow,'PAYMDIVCD') == 13?&quot;현장할인&quot;:&quot;&quot;)))"/>
              <Cell col="2" text="expr:ds_if_dtl_record00.getColumn(currow,'APRVDIVCDDETAIL') == 01?&quot;결제&quot;:(ds_if_dtl_record00.getColumn(currow,'APRVDIVCDDETAIL') == 02?&quot;결제취소&quot;:ds_if_dtl_record00.getColumn(currow,'APRVDIVCDDETAIL'))"/>
              <Cell col="3" text="bind:FDTYNPAYMDETAIL"/>
              <Cell col="4" displaytype="number" text="bind:AMTPAYMDETAIL"/>
              <Cell col="5" text="bind:FDTAMT"/>
              <Cell col="6" text="expr:ds_if_dtl_record00.getColumn(currow,'RESPCD') == &quot;&quot;?&quot;&quot;:(ds_if_dtl_record00.getColumn(currow,'RESPCD') == 00000?&quot;정상&quot;:(ds_if_dtl_record00.getColumn(currow,'RESPCD') == null?&quot;&quot;:&quot;오류&quot;))"/>
              <Cell col="7" text="bind:RESPMSG"/>
              <Cell col="8" text="bind:APRVNO"/>
              <Cell col="9" displaytype="number" text="bind:TOTRESTPT"/>
              <Cell col="10" displaytype="number" text="bind:GNRLPT"/>
              <Cell col="11" displaytype="number" text="bind:CCRDPNTUSEAMT"/>
              <Cell col="12" text="bind:INSMON" expr="ds_if_dtl_record00.getColumn(currow,'INSMON') == &quot;0&quot;?&quot;일시불&quot;:(ds_if_dtl_record00.getColumn(currow,'INSMON') == &quot;2&quot;?&quot;2개월&quot;:(ds_if_dtl_record00.getColumn(currow,'INSMON') == &quot;3&quot;?&quot;3개월&quot;:(ds_if_dtl_record00.getColumn(currow,'INSMON') == &quot;4&quot;?&quot;4개월&quot;:(ds_if_dtl_record00.getColumn(currow,'INSMON')==&quot;5&quot;?&quot;5개월&quot;:(ds_if_dtl_record00.getColumn(currow,'INSMON')==&quot;6&quot;?&quot;6개월&quot;:&quot;&quot;)))))"/>
            </Band>
          </Format>
        </Formats>
      </Grid>
      <Static id="Static03" text="결제 내역 상세" class="sta_WF_subtitle" position="absolute 18 147 126 159"/>
      <MaskEdit id="Edt_txt04" taborder="1" text="    -  -     :  :  " readonly="true" type="string" mask="@@@@-@@-@@ @@:@@:@@" maskchar=" " position="absolute 306 49 427 69" style="border:2 double #b2cae0ff #ffffffff;padding:0 0 0 3;align:left middle;" class="edt_WFSA"/>
      <MaskEdit id="Edt_txt03" taborder="1" readonly="true" mask="9,999" maskchar=" " position="absolute 608 332 706 353" style="border:2 double #b2cae0ff #ffffffff;padding:0 3 0 3;align:right middle;" class="edt_WFSA"/>
      <MaskEdit id="Edt_txt10" taborder="1" readonly="true" mask="9,999" maskchar=" " class="edt_WFSA" position="absolute 695 76 789 96" style="border:2 double #b2cae0ff #ffffffff; padding:0 3 0 3; align:right middle; "/>
      <MaskEdit id="Edt_txt01" taborder="1" readonly="true" mask="9,999" maskchar=" " class="edt_WFSA" position="absolute 245 331 326 352" style="border:2 double #b2cae0ff #ffffffff; padding:0 3 0 3; align:right middle; "/>
      <Static id="Stt_AREA14" text="바코드 최초 활성화 시간" class="sta_WFSA_label" position="absolute 29 106 184 118"/>
      <Static id="Stt_AREA15" text="바코드 종료시간" class="sta_WFSA_label" position="absolute 319 106 474 118"/>
      <Edit id="Edt_txt14" taborder="1" imemode="hangul" readonly="true" class="edt_WFSA" position="absolute 180 103 301 122"/>
      <Edit id="Edt_txt15" taborder="1" imemode="hangul" readonly="true" class="edt_WFSA" position="absolute 424 103 545 122"/>
      <Static id="Stt_AREA16" text="쿠폰사용조건" class="sta_WFSA_label" position="absolute 564 106 656 118"/>
      <Edit id="Edt_txt16" taborder="1" imemode="hangul" readonly="true" class="edt_WFSA" position="absolute 653 102 736 122"/>
    </Layout>
    <Objects>
      <Dataset id="ds_if_dtl_record" firefirstcount="0" firenextcount="0" useclientlayout="true" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="BARCD" type="STRING" size="256"/>
          <Column id="PAYMDIVCD" type="STRING" size="256"/>
          <Column id="FDTYNEXPTDETAIL" type="STRING" size="256"/>
          <Column id="AMTEXPTDETAIL" type="STRING" size="256"/>
          <Column id="CRDNO" type="STRING" size="256"/>
          <Column id="CCRDCONM" type="STRING" size="256"/>
          <Column id="CARDALIAS" type="STRING" size="256"/>
          <Column id="TROWNNO" type="STRING" size="256"/>
          <Column id="APRVDIVCDDETAIL" type="STRING" size="256"/>
          <Column id="FDTYNPAYMDETAIL" type="STRING" size="256"/>
          <Column id="AMTPAYMDETAIL" type="STRING" size="256"/>
          <Column id="FDTAMT" type="STRING" size="256"/>
          <Column id="RESPCD" type="STRING" size="256"/>
          <Column id="APRVNO" type="STRING" size="256"/>
          <Column id="TOTRESTPT" type="STRING" size="256"/>
          <Column id="GNRLPT" type="STRING" size="256"/>
          <Column id="PAYMDIVVAL" type="STRING" size="256"/>
          <Column id="PRODNM" type="STRING" size="256"/>
          <Column id="TOTAMT" type="STRING" size="256"/>
          <Column id="RESVQTY" type="STRING" size="256"/>
          <Column id="RESVUPRC" type="STRING" size="256"/>
          <Column id="CUPNUSEYN" type="STRING" size="256"/>
          <Column id="PTUSEYN" type="STRING" size="256"/>
          <Column id="PGCOSXNNM" type="STRING" size="256"/>
          <Column id="PGCOSXNCD" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_if_dtl_env" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false"/>
      <Dataset id="ds_if_dtl_data" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false"/>
      <Dataset id="ds_if_dtl_header" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false"/>
      <Dataset id="ds_if_dtl_column" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false"/>
      <Dataset id="ds_if_dtl_common" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false"/>
      <Dataset id="ds_if_dtl_record00" firefirstcount="0" firenextcount="0" useclientlayout="true" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="BARCD" type="STRING" size="256"/>
          <Column id="PAYMDIVCD" type="STRING" size="256"/>
          <Column id="FDYNEXPTDETAIL" type="STRING" size="256"/>
          <Column id="AMTEXPTDETAIL" type="STRING" size="256"/>
          <Column id="CRDNO" type="STRING" size="256"/>
          <Column id="CCRDCONM" type="STRING" size="256"/>
          <Column id="CARDALIAS" type="STRING" size="256"/>
          <Column id="TROWNNO" type="STRING" size="256"/>
          <Column id="APRVDIVCDDETAIL" type="STRING" size="256"/>
          <Column id="FDTYNPAYMDETAIL" type="STRING" size="256"/>
          <Column id="AMTPAYMDETAIL" type="STRING" size="256"/>
          <Column id="FDTAMT" type="STRING" size="256"/>
          <Column id="RESPCD" type="STRING" size="256"/>
          <Column id="APRVNO" type="STRING" size="256"/>
          <Column id="TOTRESTPT" type="STRING" size="256"/>
          <Column id="GNRLPT" type="STRING" size="256"/>
          <Column id="CCRDPNTUSEAMT" type="STRING" size="256"/>
          <Column id="INSMON" type="STRING" size="256"/>
          <Column id="RESPMSG" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_if_dtl_env00" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false"/>
      <Dataset id="ds_if_dtl_data00" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false"/>
      <Dataset id="ds_if_dtl_header00" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false"/>
      <Dataset id="ds_if_dtl_column00" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false"/>
      <Dataset id="ds_if_dtl_common00" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false"/>
    </Objects>
    <Script type="xscript4.0"><![CDATA[/********************************************************************************** 
 *****	포인트선물내역조회 
***********************************************************************************/

include "LIB::CommonLib.xjs"
var SVC_IF_URL 	= "XinterfaceAction.do?method=CommonInterface";

var coup_yn = "";   //쿠폰 사용
var pt_yn = "";     //포인트 사용

function BNS412_onload(obj:Form, e:LoadEventInfo)
{
	var getDsName = this.getOwnerFrame().getDsArgument;
	
	
	trace(getDsName.saveXML());
	
	Edt_txt.value   = getDsName.getColumn(0,"PINNO");		//핀번호		
	Edt_txt00.value = getDsName.getColumn(0,"PRODNM");	//상품구분명
	Edt_txt01.value = getDsName.getColumn(0,"RESVQTY");	//예약수량
	Edt_txt02.value = getDsName.getColumn(0,"RESVUPRC");	//예약단가
	Edt_txt03.value = getDsName.getColumn(0,"TOTAMT");//예정전체결제금액
	Edt_txt04.value = getDsName.getColumn(0,"SALEDT")+ getDsName.getColumn(0,"SALETMDAY");	//매출일시
	
	var objDate0 = new Date(getDsName.getColumn(0,"INPTDTIME"));
	var INPTDTIME = objDate0.toFormatString("%Y-%m-%d %H:%M:%S");
	
	var objDate1 = new Date(getDsName.getColumn(0,"MODDTIME"));
	var MODDTIME = objDate1.toFormatString("%Y-%m-%d %H:%M:%S"); 
	
	Edt_txt14.value = INPTDTIME;	//바코드 활성화 시간
	Edt_txt15.value = MODDTIME;		//바코드 종료시간
	
	coup_yn = getDsName.getColumn(0,"CUPNUSEYN");				//쿠폰 사용여부
	pt_yn = getDsName.getColumn(0,"PTUSEYN");					//포인트 사용여부

	trace(coup_yn+"/////"+pt_yn);

	
	var ordGbn = getDsName.getColumn(0,"ORDGBN");		//쿠폰사용조건
	
	if(ordGbn == '01') {
		ordGbn = '기간임박';
	}
	if(ordGbn == '02'){
		ordGbn = '최대할인';
	}
	if(ordGbn != null && coup_yn == 'N') {
		ordGbn = '';
	}
	
	Edt_txt16.value = ordGbn
	
	if(getDsName.getColumn(0,"APRVDIVCD") == "01"){
		Edt_txt05.value = "결제";
	}else if(getDsName.getColumn(0,"APRVDIVCD") == "02"){
		Edt_txt05.value = "결제취소";
	}
	
	
	//Edt_txt06.value = getDsName.getColumn(0,"FRCHCDPAYM");	//주유소코드
	Edt_txt07.value = getDsName.getColumn(0,"FRCHNMPAYM")+"("+getDsName.getColumn(0,"FRCHCDPAYM")+")";	//주유소명
	//Edt_txt08.value = getDsName.getColumn(0,"PRODCDPAYM");	//상품구분코드
	Edt_txt09.value = getDsName.getColumn(0,"QTY");			//주유량
	Edt_txt10.value = getDsName.getColumn(0,"AMTPAYM");		//실제결제금액
	Edt_txt11.value = getDsName.getColumn(0,"UPRCPAYM");		//단가
	Edt_txt12.value = getDsName.getColumn(0,"PAYALIAS");		//패턴명	
	
	
	
	
	Edt_txt00.value = getDsName.getColumn(0,"PRODNM");  //상품구분명	
	Edt_txt01.value = getDsName.getColumn(0,"RESVQTY"); //예약수량
	Edt_txt02.value = getDsName.getColumn(0,"RESVUPRC");//예약단가	
		
	//결제 예정
	fn_srchExptGrd();
	
}

//결제 예정
function fn_srchExptGrd()
{
	var getDsName = "";
	getDsName = this.getOwnerFrame().getDsArgument;
	
	ds_if_dtl_env.clearData();
	ds_if_dtl_data.clearData();
	ds_if_dtl_common.clearData();
	ds_if_dtl_header.clearData();
	ds_if_dtl_column.clearData();
	ds_if_dtl_record.clearData();
	
	// IF ENV DS		
	
	fun_ds_srch(ds_if_dtl_env, "IF_KIND", 				"WAS-APP");
	fun_ds_srch(ds_if_dtl_env, "REQ_SERVICE_METHOD", 	"api/api-detail");
	fun_ds_srch(ds_if_dtl_env, "REQ_SERVICE_ID", 		"");
	fun_ds_srch(ds_if_dtl_env, "RES_HEADER_SECTION", 	"apiDetail_Rsp");
	fun_ds_srch(ds_if_dtl_env, "RES_COLUMN_SECTION", 	"");
	fun_ds_srch(ds_if_dtl_env, "RES_RECORD_SECTION", 	"exptList");

	// IF DATA DS		
	fun_ds_srch(ds_if_dtl_data, "barCd",getDsName.getColumn(0,"BARCD"));		
	fun_ds_srch(ds_if_dtl_data, "trOwnNo",getDsName.getColumn(0,"TROWNNO"));	
	
	//테스트 데이터
	//fun_ds_srch(ds_if_dtl_data, "barCd","70055032008224142318");	
	//fun_ds_srch(ds_if_dtl_data, "trOwnNo","24032214235300030542");		
	
	
	var	strSvcID = "IF_CSC_ITRT_091";
	var	strURL = SVC_IF_URL;	
	var	strInDatasets = "INTERFACE_ENV=ds_if_dtl_env:a INTERFACE_DATA=ds_if_dtl_data:a";
	var	strOutDatasets = "ds_if_dtl_common=DS_COMMON ds_if_dtl_header=DS_HEADER ds_if_dtl_column=DS_COLUMN ds_if_dtl_record=DS_RECORD";
	var	strArgument = "";
	var strCallbackFunc = "fn_callBack";
	var strProcessBar = true;
	
	cf_SVC(strSvcID,strURL,strInDatasets,strOutDatasets,strArgument,strCallbackFunc,strProcessBar);			
}


function fn_srchPaymGrd()
{
	var getDsName = "";
	getDsName = this.getOwnerFrame().getDsArgument;
	
	ds_if_dtl_env00.clearData();
	ds_if_dtl_data00.clearData();
	ds_if_dtl_common00.clearData();
	ds_if_dtl_header00.clearData();
	ds_if_dtl_column00.clearData();
	ds_if_dtl_record00.clearData();
	
	// IF ENV DS		
	
	fun_ds_srch(ds_if_dtl_env00, "IF_KIND", 				"WAS-APP");
	fun_ds_srch(ds_if_dtl_env00, "REQ_SERVICE_METHOD", 	"api/api-detail");
	fun_ds_srch(ds_if_dtl_env00, "REQ_SERVICE_ID", 		"");
	fun_ds_srch(ds_if_dtl_env00, "RES_HEADER_SECTION", 	"apiDetail_Rsp");
	fun_ds_srch(ds_if_dtl_env00, "RES_COLUMN_SECTION", 	"");
	fun_ds_srch(ds_if_dtl_env00, "RES_RECORD_SECTION", 	"paymList");

	// IF DATA DS		
	fun_ds_srch(ds_if_dtl_data00, "barCd",getDsName.getColumn(0,"BARCD"));		
	fun_ds_srch(ds_if_dtl_data00, "trOwnNo",getDsName.getColumn(0,"TROWNNO"));		
	
	//fun_ds_srch(ds_if_dtl_data, "barCd","70012652012021151518");	
	//fun_ds_srch(ds_if_dtl_data, "trOwnNo","21043015155600009686");		
	
	var	strSvcID = "IF_CSC_ITRT_092";
	var	strURL = SVC_IF_URL;	
	var	strInDatasets = "INTERFACE_ENV=ds_if_dtl_env00:a INTERFACE_DATA=ds_if_dtl_data00:a";
	var	strOutDatasets = "ds_if_dtl_common00=DS_COMMON ds_if_dtl_header00=DS_HEADER ds_if_dtl_column00=DS_COLUMN ds_if_dtl_record00=DS_RECORD";
	var	strArgument = "";
	var strCallbackFunc = "fn_callBack";
	var strProcessBar = true;
	
	cf_SVC(strSvcID,strURL,strInDatasets,strOutDatasets,strArgument,strCallbackFunc,strProcessBar);			
}

// 콜백처리
function fn_callBack(svcid,strErrCode,strErrMsg)
{
	var getDsName = "";
	getDsName = this.getOwnerFrame().getDsArgument;
	
	
	//trace(ds_if_dtl_record.saveXML());
	
	// 
	if(svcid == "IF_CSC_ITRT_091"){
	
	
		trace("결제 예정>>>>>>>>"+ds_if_dtl_record.saveXML());
		
		
		//카드 번호 처리 @@@@-@@@@-@@@@-@@@@
		var nRow = ds_if_dtl_record.findRowExpr("PAYMDIVCD == '09'");		
		trace("nRow>>>>"+nRow);
		trace(">>>"+coup_yn+"/////"+pt_yn);
		if(nRow > -1)
		{		
			var mAsk1 = ds_if_dtl_record.getColumn(nRow,"PAYMDIVVAL").substr(0,4);		
			var mAsk2 = ds_if_dtl_record.getColumn(nRow,"PAYMDIVVAL").substr(4,4);		
			var mAsk3 = ds_if_dtl_record.getColumn(nRow,"PAYMDIVVAL").substr(8,4);		
			var mAsk4 = ds_if_dtl_record.getColumn(nRow,"PAYMDIVVAL").substr(12,4);				
			var mAsk = mAsk1+"-"+mAsk2+"-"+mAsk3+"-"+mAsk4;		
			ds_if_dtl_record.setColumn(nRow,"PAYMDIVVAL",mAsk);
			
			
			
		}
		//신용카드에 쿠폰/포인트 사용여부 추가 20211020 박소연 선임
		var nRow = ds_if_dtl_record.findRowExpr("PAYMDIVCD == '03'"); //결제 구분이 신용카드 이면		
		if(nRow > -1)
		{
			//쿠폰/포인트 사용여부
			trace(coup_yn+"/////"+pt_yn);
			//ds_if_dtl_record.addColumn( "CUPNUSEYN", "string");
			//ds_if_dtl_record.addColumn( "PTUSEYN", "string");			
			//trace(">>>"+ds_if_dtl_record.saveXML());
			ds_if_dtl_record.setColumn(nRow,"CUPNUSEYN",coup_yn);
			ds_if_dtl_record.setColumn(nRow,"PTUSEYN",pt_yn);
			
		}
	
		var strHttpCd 	= ds_if_dtl_common.getColumn(0,"HTTP_RET_CODE");
		var strHttpMsg 	= ds_if_dtl_common.getColumn(0,"HTTP_RET_MSG");
		
		if(strHttpCd=="0"){
			var strRtnCd	= ds_if_dtl_header.getColumn(0,"RESULTCODE");
			var strRtnMsg	= ds_if_dtl_header.getColumn(0,"RESULTMESSAGE");
					
			if(strRtnCd=="0000"){				
				Stt_SrchCnt.text = ds_if_dtl_record.rowcount;	
				
				//네이버페이 결제수단 추가로 인한 분기처리 | 박소연선임
				for(var i=0; i<ds_if_dtl_record.rowcount; i++) {
					if(ds_if_dtl_record.getColumn(i, "PGCOSXNCD") == '4000') {
						ds_if_dtl_record.setColumn(i, "PGCOSXNNM", "Y");
					}else {
						ds_if_dtl_record.setColumn(i, "PGCOSXNNM", "N");
					}
				}
			}else{
				cf_Alert("COME0035",strRtnMsg);	
			}			
		}else{
			cf_Alert("COME0035",strHttpMsg);
		}
		//결제 내역 상세 
		fn_srchPaymGrd();	
			
	}else if(svcid == "IF_CSC_ITRT_092"){		
		
		trace("ds_if_dtl_record00>>>>>>>>>"+ds_if_dtl_record00.saveXML());
		var strHttpCd 	= ds_if_dtl_common00.getColumn(0,"HTTP_RET_CODE");
		var strHttpMsg 	= ds_if_dtl_common00.getColumn(0,"HTTP_RET_MSG");
		
		
		if(strHttpCd == "0"){
			var strRtnCd	= ds_if_dtl_header00.getColumn(0,"RESULTCODE");
			var strRtnMsg	= ds_if_dtl_header00.getColumn(0,"RESULTMESSAGE");
					
			if(strRtnCd=="0000"){
							
				if(ds_if_dtl_record00.rowcount < 1 ){
					Grd_CustGrd00.nodatatext = "조회된건이 없습니다.";
				}
			}else{
				cf_Alert("COME0035",strRtnMsg);	
			}			
		}else{
			cf_Alert("COME0035",strHttpMsg);
		}	
		
	}else{
		//
	}
}

function Btn_Close_onclick(obj:Button,  e:ClickEventInfo)
{
	this.close();
}



function Grd_CustGrd_onheadclick(obj:Grid, e:GridClickEventInfo)
{
	cf_gridSort(obj, e);	
}
]]></Script>
    <Bind>
      <BindItem id="item29" compid="Edt_txt04" propid="value" datasetid="ds_cust_info" columnid="OT_FST_REG_DT"/>
      <BindItem id="item30" compid="Edt_txt03" propid="value" datasetid="ds_cust_info" columnid="OT_TOT_PT"/>
      <BindItem id="item0" compid="Edt_txt10" propid="value" datasetid="ds_cust_info" columnid="OT_TOT_PT"/>
      <BindItem id="item1" compid="Edt_txt01" propid="value" datasetid="ds_cust_info" columnid="OT_TOT_PT"/>
    </Bind>
  </Form>
</FDL>
